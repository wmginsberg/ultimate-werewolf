<link rel="import" href="../bower_components/polymer/polymer.html">

<!--
`game-timer`
this is a timer for the game

@demo demo/index.html 
-->

<dom-module id="game-timer">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <h2> [[time]]</h2>
  </template>

  <script>
    Polymer({

      is: 'game-timer',

      properties: {
        time: {
          type: String,
          value: '00:00',
          notify: true
        },
      },

      startTimer: function(duration) {
        var timer = duration, minutes, seconds;
        console.log(timer);
        console.log(minutes);
        console.log(seconds);
        setInterval(function () {
            minutes = parseInt(timer / 60, 10);
            seconds = parseInt(timer % 60, 10);

            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;

            this.time = minutes + ":" + seconds;

            if (--timer < 0) {
                timer = duration;
            }
        }, 1000);
      },
      ready: function() {
        console.log("timer starting...");
        var fiveMinutes = 60 * 5;
        this.startTimer(fiveMinutes);
      }

    });
  </script>
</dom-module>
